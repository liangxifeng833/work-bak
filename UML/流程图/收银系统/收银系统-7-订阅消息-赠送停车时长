@startuml
title 收款-订阅消息-停车场服务-流程图

|消息队列服务|
start
:收款成功\nconsumeId+合同号;

|停车场服务|
    :订阅接收到消息队列的\nconsumeId和合同号;
|收款服务|
    :查询合同数据;
    note right
        注意:
            该部分接口为java接口;
            调用该接口前提必须是会员;
            所以在此之前必须保证
            新增会员订阅服务是先执行的.
    end note
|停车场服务|
    :得到memberId;
|会员服务|
    :查询会员信息;
|停车场服务|
    :计算需要赠送的停车时长;
    :新增领取时长表数据;
|队列服务|
:发送状态消息;
|停车场服务|
end
@enduml
